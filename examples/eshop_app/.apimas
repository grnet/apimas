root: http://localhost:8000
spec:
    .endpoint: {}
    api:
        products:
            .collection:
                model: eshop.models.Product
                custom_mixins: [eshop.api_schema.Custom]
            .cli_commands: {}
            '*':
                stock:
                    .cli_option: {}
                    .field: {}
                    .drf_field: {}
                    .required: {}
                    .integer: {}
                name:
                    .cli_option: {}
                    .field: {}
                    .drf_field: {}
                    .indexable: {}
                    .required: {}
                    .string: {}
            actions:
                .list: {}
                .create: {}
                .update: {}
                .delete: {}
                .retrieve: {}
        carts:
            .collection:
                model: eshop.models.Cart
            .cli_commands: {}
            '*':
               products:
                   .structarray:
                       source: products
                   .cli_option: {}
                   '*':
                       stock:
                           .integer: {}
                           .cli_option: {}
                           .field: {}
                           .required: {}
                       name:
                           .string: {}
                           .cli_option: {}
                           .field: {}
                           .blankable: {}
            actions:
                .list: {}
                .create: {}
        cities:
            .collection:
                model: eshop.models.City
            .cli_commands: {}
            '*':
                name:
                    .cli_option: {}
                    .drf_field: {}
                    .string: {}
            actions:
                .list: {}
        orders:
            .collection:
                model: eshop.models.Order
            .cli_commands: {}
            .cli_auth:
               .auth_format:
                   format: yaml
               basic:
                   - username
                   - password
            '*':
                id:
                    .cli_option: {}
                    .drf_field: {}
                    .field: {}
                    .serial: {}
                city:
                    .ref:
                        to: cities
                    .field: {}
                    .cli_option: {}
                    .drf_field: {}
                timea:
                    .datetime:
                        format: '%Y-%m-%d %H:%M'
                    .field: {}
                    .cli_option: {}
                    .drf_field:
                        source: date
                cart:
                    .struct:
                        products:
                            .structarray:
                                name:
                                    .cli_option: {}
                                    .field: {}
                                    .drf_field: {}
                                    .string: {}
                            .cli_option: {}
                            .field: {}
                            .drf_field:
                                source: products
                        id:
                            .field: {}
                            .cli_option: {}
                            .drf_field: {}
                            .serial: {}

                    .cli_option: {}
                    .drf_field:
                        source: cart
                        custom_mixins: [eshop.api_schema.Custom]
                    .field: {}
            actions:
                .list: {}
                .create: {}
                .update: {}
                .delete: {}
                .retrieve: {}
